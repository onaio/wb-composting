{% extends 'base.jinja2' %}
{% block top_nav %}
  {% set path = request.route_path('municipalities', traverse=(municipality.id, 'skips')) %}
  <li class="tasks-menu">
    <a href="{{ path }}" class="{% if request.is_current_path(path) %}active{% endif %}">
      <i class="fa fa-truck"></i>
      Skip Types
    </a>
  </li>
  {% set path = request.route_path('municipalities', traverse=(municipality.id, 'profile')) %}
  <li class="tasks-menu">
    <a href="{{ path }}" class="{% if request.is_current_path(path) %}active{% endif %}">
      <i class="fa fa-cog"></i>
      Site Profile
    </a>
  </li>
{% endblock %}
{% block side_nav %}
<!-- Left side column. contains the logo and sidebar -->
  <aside class="left-side sidebar-offcanvas">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->

      <!-- search form -->

      <!-- /.search form -->
      <!-- sidebar menu: : style can be found in sidebar.less -->
      <ul class="sidebar-menu">
        <li class="">
          <a href="{{ request.route_url('municipalities', traverse=(municipality.id)) }}">
            <span>Overview</span>
          </a>
        </li>
        <li class="">
          <a href="{{ request.route_url('municipalities', traverse=(municipality.id, 'reports')) }}">
            <span>Site Reports</span>
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'daily-waste')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Daily Waste Register</span>
            {% if municipality.num_actionable_daily_wastes > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_daily_wastes }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'monthly-waste-density')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Monthly Waste Density</span>
            {% if municipality.num_actionable_monthly_waste > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_monthly_waste }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'monthly-solid-waste-composition')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Monthly Solid Waste Composition</span>
            {% if municipality.num_actionable_monthly_waste_composition > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_monthly_waste_composition }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'daily-rejects-landfilled')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Daily Rejects Landfilled</span>
            {% if municipality.num_actionable_daily_rejects_landfilled > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_daily_rejects_landfilled }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'density-of-rejects-from-sieving')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Monthly Density of Rejects from Sieving</span>
            {% if municipality.num_actionable_monthly_rejects_density > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_monthly_rejects_density }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'windrow-monitoring')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Windrow Monitoring</span>
            {% if municipality.num_actionable_windrow_monitoring > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_windrow_monitoring }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'municipality-electricity-register')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Municipality Electricity Register</span>
            {% if municipality.num_actionable_electricity_register > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_electricity_register }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'leachete-monthly-register')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Leachate Monthly Register</span>
            {% if municipality.num_actionable_leachete_monthly_register > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_leachete_monthly_register }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'monthly-compost-density-register')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Monthly Compost Density Register</span>
            {% if municipality.num_actionable_compost_density_register > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_compost_density_register }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'outgoing-compost-sales-register')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Daily Outgoing Compost Register</span>
            {% if municipality.num_actionable_compost_sales_register > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_compost_sales_register }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'monthly-rejects-composition-from-sieving')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Monthly Composition of Rejects from Sieving</span>
            {% if municipality.num_actionable_monthly_rejects_composition > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_monthly_rejects_composition }}</small>
            {% endif %}
          </a>
        </li>
        {% set path = request.route_path('municipalities', traverse=(municipality.id, 'daily-vehicle-data-register')) %}
        <li class="{% if request.is_current_path(path) %}active{% endif %}">
          <a href="{{ path }}">
            <span>Daily Vehicle Data Register</span>
            {% if municipality.num_actionable_daily_vehicle_register > 0 %}
            <small class="badge pull-right bg-yellow">{{ municipality.num_actionable_daily_vehicle_register }}</small>
            {% endif %}
          </a>
        </li>
      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>
{% endblock %}
{% block main_column %}
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
         {{ self.title() }}
        <small>{{ municipality.name }}</small>
      </h1>
      <ol class="breadcrumb">
        {% block breadcrumbs %}
          <li><a href="{{ request.route_url('default') }}"><i
              class="fa fa-desktop"></i> Overview</a></li>
        {% endblock %}
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
      {% include 'includes/alerts.jinja2' %}
      {% block content %}{% endblock content %}
    </section>
    <!-- /.content -->

  <!-- Modal -->
  <div class="modal fade" id="details-modal" tabindex="-1" data-role="dialog" data-backdrop="static"
       aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog"></div>
  </div>
  <div class="modal fade" id="loading-modal" tabindex="-1" data-role="dialog" data-backdrop="static"
       aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Please Wait ...</h4>
          </div>
          <div class="modal-body">
            <div class="progress progress-striped active">
              <div class="progress-bar progress-bar-primary" role="progressbar"
                   aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                   style="width: 100%">
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
{% endblock %}
